using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Newtonsoft.Json.Linq;
using Newtonsoft.Json;
using System.IO;
using System.Reflection;
using System.Net.Http;
using System.Net.Http.Headers;

namespace BosungRestaurants
{
    class RootObject
    {
        dynamic[] Result { get; set; }
    }

    class Position
    {
        public double Latitude { get; set; }
        public double Longitude { get; set; }
    }

    class Restaurant
    { 
        public int Id { get; set; }
        public string Name { get; set; }
        public string Cousines { get; set; }
        public double Rating { get; set; }
        public int PriceLevel { get; set; }
        public string PlaceId { get; set; }
        public string Ref { get; set; }
        public double Latitude { get; set; }
        public double Longitude { get; set; }
        public string CloseTo { get; set; }
        public override string ToString()
        {
            return $"{this.Id}: {{\n\tPosition: {{\n\t\tlat: {this.Longitude},\n \t\tlng: {this.Longitude}\n\t}},\n" +
                                $"\tPlaceId: {this.PlaceId}, \n" +
                                $"\tName: {this.Name}, \n" +
                                $"\tCousine: {this.Cousines},\n " +
                                $"\tRating: {this.Rating}, \n" +
                                $"\tPriceLevel: {this.PriceLevel}, \n" +
                                $"\tReferenceCode: {this.Ref}\n" +
                                $"}}";
        }
    }

    class Program
    {
        const string cousine = "Asian";
        private static string currentObject = "{\"html_attributions\": [],    \"next_page_token\": \"CrQCKgEAADV_aW5XnVRSmPgggSnKVqGOsWfdfnCXHsRLap6Uvz_P3jaPnE1gVPP0wzTA-8bpbutA4Q8ZeR-1foB0yVHmEPA5SdEDWzVAesPj6t2uXG6hmhEuLdIFBpFagMiA9cXxFU3CloLCPLk0CEaNVJWl2bEmSp7BY8LMBUQdayZ3M8YUtwM8Wsx2DCBXT60MjanmZMBnXrGTkQVLY1g30Ak_TvfGlqSLDmBAJdv_ECkwdIJ8XzLpJRyofAfcvgzXtvUQwtYqwRAvqNX9f6HXgk273ZTJWgZcJ-IpP30ar3mD0yaAmot8wX_7KJCHeFfuTIcMLEB1SDB2xGM9qLa1BmBkQcsmsvapBRn_XvlAGtFEOfs0ohNI-sRsT2GXBPuJgDJg6qydq_dimbUDVeQcAK0MJKkSEMMxXduiL3iszW4-mt634CwaFD4mL_dODPOUS_huuw61G0aC1jis\",    \"results\": [        {            \"geometry\": {                \"location\": {                    \"lat\": 51.5163458,                    \"lng\": -0.07328849999999999                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51776947989271,                        \"lng\": -0.0717080701072778                    },                    \"southwest\": {                        \"lat\": 51.51506982010727,                        \"lng\": -0.07440772989272224                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"50d825c4322fce19f48335d5040fbe729b66662f\",            \"name\": \"Yuu Kitchen\",            \"opening_hours\": {                \"open_now\": false            },            \"photos\": [                {                    \"height\": 2160,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/111159239803029273544/photos\\\">Olena Chaus</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAjLjXrKk0R3aA4bTc3zQZ2SoULQ-AfMBPIzbrbJ6bvMQYp-6LMtldNCWMOYh7AycMA9ZFQ7P3vYqBMKSCCaTMcl6hYlBTwDH8TvB2V_DB9PEiUdzRwMUNT-_H0A6Bcgy1EhDW_nnMbvEXdrN_cVxhYic4GhQxW_Z13TVHNLBQ1eYKfMNB04mcBQ\",                    \"width\": 3840                }            ],            \"place_id\": \"ChIJq0r5GLUcdkgR9zRFDFoJATM\",            \"plus_code\": {                \"compound_code\": \"GW8G+GM City of London, London\",                \"global_code\": \"9C3XGW8G+GM\"            },            \"price_level\": 2,            \"rating\": 4.5,            \"reference\": \"ChIJq0r5GLUcdkgR9zRFDFoJATM\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"29 Commercial St, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.51659,                    \"lng\": -0.13303                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51792457989272,                        \"lng\": -0.1317293201072778                    },                    \"southwest\": {                        \"lat\": 51.51522492010728,                        \"lng\": -0.1344289798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"8c60dc07be31c60fd9ce858cd2ec6ad6209aa85a\",            \"name\": \"East Street Restaurant\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 3024,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/113419880391558389617/photos\\\">Marshah Shah</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAxEhqJWvyuLAbQAvY0JDv-Wln6sHBWGtHHdPMsUBD4Ym_Ezh4oXKzseMfHTMcGT1WS4sDymfJuey49VRXDkBtyqVAGKKvcthTXL2ssG6mcfnGBDlZonJBwS-1LF2uOThaEhBen4ORMM9abmSHtbGJwOhjGhT3E4DX7KhA-d5xRbrWj6GiJfNJUA\",                    \"width\": 4032                }            ],            \"place_id\": \"ChIJIyhE7ywbdkgRMSlLC6ZZohc\",            \"plus_code\": {                \"compound_code\": \"GV88+JQ Fitzrovia, London\",                \"global_code\": \"9C3XGV88+JQ\"            },            \"rating\": 4.2,            \"reference\": \"ChIJIyhE7ywbdkgRMSlLC6ZZohc\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"3-5 Rathbone Pl, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.52022299999999,                    \"lng\": -0.073791                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.52161457989271,                        \"lng\": -0.07244367010727779                    },                    \"southwest\": {                        \"lat\": 51.51891492010727,                        \"lng\": -0.07514332989272222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"8dc504bc9953487a703454599427f24b1cc9316a\",            \"name\": \"Rosa's Thai Cafe Spitalfields\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 1420,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/110799959151288194591/photos\\\">Rosa&#39;s Spitalfields</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAIET5fT22wFxQEsJIl0SCjQcXPk0Pg-0QFt7qb0Lmc1sZArCI8Ki5PNTUKxwn2_qTocoaSKsTOaEgGriqmqyDjNPM09KgqZ7Ks4l9_CCtnXJo6YXUPRpQfMYaObpaF2MbEhABtm3kHkteIHKy8sR1lhTQGhTiXSDRfamIR6Y56vksxwU84H_Vug\",                    \"width\": 2048                }            ],            \"place_id\": \"ChIJzbPEKbQcdkgRoRvhH54pn7w\",            \"price_level\": 2,            \"rating\": 4.1,            \"reference\": \"ChIJzbPEKbQcdkgRoRvhH54pn7w\",            \"scope\": \"GOOGLE\",            \"types\": [                \"meal_delivery\",                \"cafe\",                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"12 Hanbury St, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.5155328,                    \"lng\": -0.1894082                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51694637989272,                        \"lng\": -0.1880770701072778                    },                    \"southwest\": {                        \"lat\": 51.51424672010728,                        \"lng\": -0.1907767298927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"7898c95bf819e7f6ecbad08eb9c5702fe364e373\",            \"name\": \"Banana Tree Westbourne Grove\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 598,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/106365159308252721507/photos\\\">London&#39;s Best Restaurants</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAVWW7VkkO7I2Dw8tuj-IenhIqgk-GaCj9jP9HPH7px9Afz_OHL0tIAGq-atWzgaCg2-Oco3zI59tsOTcbHPUACSpCH9qkXQkbjYoQnwtCIOQhW0IQ8yeQjaSf9zdJe6bBEhBF_k0-QeWwLjyMUp3gGNznGhQaTAwGQjvwCufgUpBAUmzn2ok8KQ\",                    \"width\": 900                }            ],            \"place_id\": \"ChIJKccnIwAQdkgRUXiTCFKzLmQ\",            \"plus_code\": {                \"compound_code\": \"GR86+66 Hallfield Estate, London\",                \"global_code\": \"9C3XGR86+66\"            },            \"price_level\": 2,            \"rating\": 4.1,            \"reference\": \"ChIJKccnIwAQdkgRUXiTCFKzLmQ\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"Standard Indian Restaurant, Westbourne Grove, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.5139123,                    \"lng\": -0.08962289999999999                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51526212989272,                        \"lng\": -0.08827307010727778                    },                    \"southwest\": {                        \"lat\": 51.51256247010728,                        \"lng\": -0.09097272989272222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"7b425cdf8765b338f5d09670c88e7c27f8ce19b2\",            \"name\": \"Kaia\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 6200,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/103882456371568261379/photos\\\">A Google User</a>\"                    ],                    \"photo_reference\": \"CmRZAAAAc1FUMhFO3DoKBgwhlCymYZRg--SQeU0gYSXMJbTDX21kjbZ6PjNEMJQoCCWMy22avC89yR--Z3lRyeAIBsh0QB_L5AMF6lluLHbxF3_ZrQVYc7vW8posCpLuyeqAt08fEhAOf8A96iWR9YeKBOOzQOl9GhQlHhCPWS_dZXadXT1CCSO6KD0ttA\",                    \"width\": 8272                }            ],            \"place_id\": \"ChIJZbiEwVQDdkgRL85t9W9GNF0\",            \"plus_code\": {                \"compound_code\": \"GW76+H5 City of London, London\",                \"global_code\": \"9C3XGW76+H5\"            },            \"rating\": 4.1,            \"reference\": \"ChIJZbiEwVQDdkgRL85t9W9GNF0\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"The Ned, 27 Poultry, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.633002,                    \"lng\": -0.175823                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.63435617989272,                        \"lng\": -0.1744238201072778                    },                    \"southwest\": {                        \"lat\": 51.63165652010728,                        \"lng\": -0.1771234798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"7a2d521796e62f43fd4f4e16385c5a1e43b9fbd3\",            \"name\": \"Tootoomoo Whetstone\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 667,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/115806300889981859749/photos\\\">Tootoomoo Whetstone</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAreSjdeeVIHJ-ikWqKOfbX24yY5kgtgndT_c6YQy0qkuD7jfuF0qyUlJQqFC8scsFp1Qb-eHTDeVqAOB65pJQQptk2zc7YAHvCaVQsRkN30KZgTz-oAPWD-QTREHGooYeEhAy_XQOufY0Zi6EEh2PwST5GhQvYGr8mLHJUjvIkfjVxAuqXftSpg\",                    \"width\": 1000                }            ],            \"place_id\": \"ChIJF1hhyM8ZdkgRZPJMqdFd1_k\",            \"price_level\": 2,            \"rating\": 4,            \"reference\": \"ChIJF1hhyM8ZdkgRZPJMqdFd1_k\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"1371 High Rd, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.546363,                    \"lng\": -0.100685                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.54766982989273,                        \"lng\": -0.09931452010727777                    },                    \"southwest\": {                        \"lat\": 51.54497017010728,                        \"lng\": -0.1020141798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"c76e6dc7661fb744b42a8f51722b5d5ecf303af0\",            \"name\": \"Tootoomoo Islington\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 310,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/102574126846456363627/photos\\\">Tootoomoo Islington</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAp77gV8r1uovhaTLWmejsDdoyDpvJCHZcQVH_QbRZNwXSG1BOX9kWBQ2jsuSghKtsZyCMpiZDKpk7519Jew3_nPoEDMQg8BjdxxRsl2OSmjRaVOKEdee2tYdPtPSTZ5dPEhCSoCUIBZq4sYQY7_QFIOqKGhScPL5zLoyJL22W4auGpFqujnGQyA\",                    \"width\": 550                }            ],            \"place_id\": \"ChIJ8b6GsmQbdkgRny70eEw1a28\",            \"rating\": 4,            \"reference\": \"ChIJ8b6GsmQbdkgRny70eEw1a28\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"278 St Paul's Rd, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.509612,                    \"lng\": -0.19796                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51105582989273,                        \"lng\": -0.1965737701072778                    },                    \"southwest\": {                        \"lat\": 51.50835617010728,                        \"lng\": -0.1992734298927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"a695a9e42088b12b1bbde0315734fa22318e565a\",            \"name\": \"ULI\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 668,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/101864481524199373988/photos\\\">ULI</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAWFQwqsUeFVnFZzjEqmCsZMpQS51ULu765IbY8-iR6C-jWBGpIzpZ2kzwBJLAmmSJdKiFnMrooZiq0ntbDJDnx1Ko1HIpvFKPZDtuez7rCPDKtQ7UKluX2jjNLKAhJUk6EhAc7ezn42IVlzwDTAyOiE5QGhQMpUr799ISaGg4iMe2hD6dZAhBEA\",                    \"width\": 1000                }            ],            \"place_id\": \"ChIJ3-UGnvwPdkgRsHvyvZbrro4\",            \"price_level\": 2,            \"rating\": 4.3,            \"reference\": \"ChIJ3-UGnvwPdkgRsHvyvZbrro4\",            \"scope\": \"GOOGLE\",            \"types\": [                \"meal_delivery\",                \"meal_takeaway\",                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"5 Ladbroke Rd, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.5131223,                    \"lng\": -0.1339119                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51445297989272,                        \"lng\": -0.1324823201072778                    },                    \"southwest\": {                        \"lat\": 51.51175332010728,                        \"lng\": -0.1351819798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"1889d7fbc6872f527f54210285e66e3c37057369\",            \"name\": \"Banana Tree Soho\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 1385,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/102483583917127232530/photos\\\">Banana Tree</a>\"                    ],                    \"photo_reference\": \"CmRaAAAA6_NcGM51Hgx04tctRegjGtGXgbl62khK7nDkKoXhzYr909v2jEwsw-skC64Kd0PAMEuJQMVwRepyKHl7o7ACS1vsIPV8iadc8rwezNC4MfxAaE552uOt3eJ3qajCFpoTEhDTaxdhlNdiItk6c-yMEZ_5GhQvDI0ifUzHvcqVaXeF241GCCkZQw\",                    \"width\": 2048                }            ],            \"place_id\": \"ChIJNyG8bdMEdkgRTf93j7EbIDA\",            \"plus_code\": {                \"compound_code\": \"GV78+6C Soho, London\",                \"global_code\": \"9C3XGV78+6C\"            },            \"price_level\": 2,            \"rating\": 4.1,            \"reference\": \"ChIJNyG8bdMEdkgRTf93j7EbIDA\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"103 Wardour St, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.531372,                    \"lng\": -0.1059326                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.53271152989272,                        \"lng\": -0.1046793701072778                    },                    \"southwest\": {                        \"lat\": 51.53001187010727,                        \"lng\": -0.1073790298927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"4e8b296706aead342b6b5010730d9d7b5918a81d\",            \"name\": \"Banana Tree Islington\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 3024,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/116043731721496479233/photos\\\">Alistair Vile</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAO2dFcIp-DKiT4xSED7ewI9OAOgpBL4EC-4i_N59gND_4hseq5PZcBpU9PqKSgBoAAtopd1X0coSVuB9rPsnYp1yIqvCEm0M7PgLbYnH-DDkK627Q-2X__WBF44C1vgULEhAgflBMK565-pbyd8eKcrO-GhR0jGFlyX-uHK9rOdyHjsyUTeG3Gw\",                    \"width\": 4032                }            ],            \"place_id\": \"ChIJTwETTUMbdkgRNfQJ9UT-gwU\",            \"plus_code\": {                \"compound_code\": \"GVJV+GJ Clerkenwell, London\",                \"global_code\": \"9C3XGVJV+GJ\"            },            \"price_level\": 2,            \"rating\": 4,            \"reference\": \"ChIJTwETTUMbdkgRNfQJ9UT-gwU\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"412-416 St John St, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.5184819,                    \"lng\": -0.1169038                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51984512989272,                        \"lng\": -0.1154621201072778                    },                    \"southwest\": {                        \"lat\": 51.51714547010727,                        \"lng\": -0.1181617798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"1b6ffc19b3636691ca32458d4ef984b62442a4ae\",            \"name\": \"Sawadika Thai Restaurant\",            \"opening_hours\": {                \"open_now\": false            },            \"photos\": [                {                    \"height\": 1365,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/105922313024042502175/photos\\\">Mike TAM</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAguhZMEKO20ONBDaBOiOJVnQQFfWO99gUBKwMrQGbLgYItLhG-yude2WPEycAXqvkLhd8l9Xx_70t0dIPhVFPUZHJuJbfugzNzi6BY-BacwGDlr6enofVmQZRt04ucoU0EhAXwOMdVI3mKANu_nVOuYtuGhTH1dN4_nWVuof5r02yWpGUXIkk3w\",                    \"width\": 2048                }            ],            \"place_id\": \"ChIJIU_tcUobdkgR9IpjkNLo0gQ\",            \"plus_code\": {                \"compound_code\": \"GV9M+96 City of London, London\",                \"global_code\": \"9C3XGV9M+96\"            },            \"rating\": 3.9,            \"reference\": \"ChIJIU_tcUobdkgR9IpjkNLo0gQ\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"71A Red Lion St, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.49375389999999,                    \"lng\": -0.1415854                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.49514102989272,                        \"lng\": -0.1402829201072778                    },                    \"southwest\": {                        \"lat\": 51.49244137010728,                        \"lng\": -0.1429825798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"5b93bd596b0b76d2253a93fd7fbecf9655924051\",            \"name\": \"Rosa's Thai Cafe Victoria\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 859,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/116653537653476034163/photos\\\">Rosa&#39;s Victoria</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAZuFRVC5Q4znDUx6XNlZh8X0vy5yZ_s6Lde7bSc8o3gzsSe49pREEsJe5zDT-HhtxIs2rg6iTBzk26SxgLTxz1p0Pfx37GMluRO7qVVfZ10JtyDLSyYxuXxgnBLPyrr39EhCDdibuxghSA-3zdM_YFGaSGhSJ7UsEGsnvOIT6_LAtDOeXLkhmjg\",                    \"width\": 1288                }            ],            \"place_id\": \"ChIJ5y8q-B8FdkgRNAGbmj7KOU8\",            \"plus_code\": {                \"compound_code\": \"FVV5+G9 Pimlico, London\",                \"global_code\": \"9C3XFVV5+G9\"            },            \"price_level\": 2,            \"rating\": 4,            \"reference\": \"ChIJ5y8q-B8FdkgRNAGbmj7KOU8\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"25 Gillingham St, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.50527760000001,                    \"lng\": -0.0802491                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.50634402989272,                        \"lng\": -0.07828802010727778                    },                    \"southwest\": {                        \"lat\": 51.50364437010728,                        \"lng\": -0.08098767989272222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"a3464d623c1cec9ddefe9e5bb3c5dad46bbdfaab\",            \"name\": \"dim t\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 1200,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/110132550027482921601/photos\\\">Bryan sanchez</a>\"                    ],                    \"photo_reference\": \"CmRaAAAA2cVVRKl6fNIEbAsjXuOI9MBsL_C9ABi29Pp3EiALe-7napfNlEZDmur-ZvyC71Q4mc6mTEloZWYjCiojXFVaI2ByCA2liAc4odbdnd7OAHjXeo1parfuDj3cQL2z39R0EhD0PLSpHddcGSVvwik-fOwbGhQUvWD5pMgW3WrWuQgIN9tPfqf93Q\",                    \"width\": 1600                }            ],            \"place_id\": \"ChIJH85Fkk8DdkgRo99R85cwmaU\",            \"plus_code\": {                \"compound_code\": \"GW49+4W City of London, London\",                \"global_code\": \"9C3XGW49+4W\"            },            \"price_level\": 2,            \"rating\": 3.6,            \"reference\": \"ChIJH85Fkk8DdkgRo99R85cwmaU\",            \"scope\": \"GOOGLE\",            \"types\": [                \"bar\",                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"2 More London Riverside, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.5098639,                    \"lng\": -0.1304892                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51125907989272,                        \"lng\": -0.1291011201072778                    },                    \"southwest\": {                        \"lat\": 51.50855942010728,                        \"lng\": -0.1318007798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"5f96652bfb62b15b5b7bd029eabcfabd7e309161\",            \"name\": \"FuLuShou Pan Asian Restaurant\",            \"place_id\": \"ChIJfU2XH9IEdkgRWM7N_ONxWSE\",            \"plus_code\": {                \"compound_code\": \"GV59+WR St. James's, London\",                \"global_code\": \"9C3XGV59+WR\"            },            \"rating\": 0,            \"reference\": \"ChIJfU2XH9IEdkgRWM7N_ONxWSE\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"Leicester Square Chambers, 42 Leicester Square, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.5297841,                    \"lng\": -0.1856962                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.53110627989272,                        \"lng\": -0.1844045701072778                    },                    \"southwest\": {                        \"lat\": 51.52840662010728,                        \"lng\": -0.1871042298927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"79adb2ebed40d39e78d478f97fcd21810504d83b\",            \"name\": \"Banana Tree Maida Vale\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 598,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/106365159308252721507/photos\\\">London&#39;s Best Restaurants</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAQdmO24OvoiGqif8v-wpZFFF2EK_5hO1VcZbBtdKejxudKYTlJnxst0rc11SGjFXaakNKoPW4D9V1n-lbpPBwkehRtEmVX98mL0pox71Lw4AZQu3N8-Qw36VaiH1vrM4zEhBNj5uWgBEZ8jok-JUno_h6GhROVH8ZVHcM2_NfMgzGvHPlzH6o9Q\",                    \"width\": 900                }            ],            \"place_id\": \"ChIJjY6RMKcadkgR5VWAJPuqjus\",            \"plus_code\": {                \"compound_code\": \"GRH7+WP Maida Vale, London\",                \"global_code\": \"9C3XGRH7+WP\"            },            \"price_level\": 2,            \"rating\": 4.2,            \"reference\": \"ChIJjY6RMKcadkgR5VWAJPuqjus\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"166 Randolph Ave, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.4936309,                    \"lng\": -0.1840505                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.49498072989272,                        \"lng\": -0.1827006701072778                    },                    \"southwest\": {                        \"lat\": 51.49228107010727,                        \"lng\": -0.1854003298927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"81212be54815695ae513ffdf2bd37e6d94045c99\",            \"name\": \"Bugis Street Brasserie\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 2592,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/101522672527931948654/photos\\\">Amit Mishra</a>\"                    ],                    \"photo_reference\": \"CmRaAAAABne3dvy4Tps2CR07PrZtDn9rg0d0f2sQe12dne4nS2igMUVk_jGjwFJgOdvfHCQByiT4CDW0gINpXWi8B2mkd966ccU0t9dpfN7yPMB5S9EEb32M2_vhvn5CxvlbChRnEhC2e3IItyv_PqWjITGLLB14GhTGOk0o0IayB86qTsnCHiPHlWZPfA\",                    \"width\": 4608                }            ],            \"place_id\": \"ChIJZ6G2Al4FdkgRRrImZzNtJco\",            \"plus_code\": {                \"compound_code\": \"FRV8+F9 Kensington, London\",                \"global_code\": \"9C3XFRV8+F9\"            },            \"price_level\": 2,            \"rating\": 4,            \"reference\": \"ChIJZ6G2Al4FdkgRRrImZzNtJco\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"Millennium Gloucester Hotel, 4-18 Harrington Gardens, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.510102,                    \"lng\": -0.07797999999999999                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.51142482989272,                        \"lng\": -0.07659642010727778                    },                    \"southwest\": {                        \"lat\": 51.50872517010728,                        \"lng\": -0.07929607989272222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"b5f834b7ab764a2e1753ebfe4c50338faf15fff6\",            \"name\": \"Mei Ume\",            \"photos\": [                {                    \"height\": 1314,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/111300363896952552083/photos\\\">A Google User</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAAkhv9d8LQWsJqizDy1MRTgPnXFsQbH6VhD5KVcJawBZ5Z6xgTvS8tEDN1AAP5PsGtHiG5qRPf06TuGZxyYI-p6TJ3nonjyIPATriXywqnqCbdDyb7JiMSc4VwvrDXinbEhDQIfY7gBKUqWkBRrTeSyDyGhRjVzATDhgqdIkf1cDO4zmtrHM5XQ\",                    \"width\": 2048                }            ],            \"place_id\": \"ChIJmWG2I0wDdkgR5QFMkdoNxEU\",            \"plus_code\": {                \"compound_code\": \"GW6C+2R City of London, London\",                \"global_code\": \"9C3XGW6C+2R\"            },            \"price_level\": 4,            \"rating\": 4.4,            \"reference\": \"ChIJmWG2I0wDdkgR5QFMkdoNxEU\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"10 Trinity Square, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.54352069999999,                    \"lng\": -0.1418974                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.54486522989271,                        \"lng\": -0.1404555701072778                    },                    \"southwest\": {                        \"lat\": 51.54216557010727,                        \"lng\": -0.1431552298927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"78eff8c26b234752c64da2b8707a9e6bc15d6c79\",            \"name\": \"Bintang\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 3036,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/115453949066452019299/photos\\\">Matthew Perfect</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAwpSaw5r4W745WgEYs6otgB8ZARnMSNWrzmWi8iGaNLO-mN_2SdZ76gesejcr91cH_d5zD1H-U0jN_G5xeaRNOmNzWcfBpi931ZPruYYGRkAc6BhY8-6hCBELjZ3lzNfNEhChgwarhiknZqCCAcyY3lrRGhTuIAoxpDjJkQ8cX0EM-5pndChawA\",                    \"width\": 4048                }            ],            \"place_id\": \"ChIJc_h0ZeIadkgRdri2AhGTfRY\",            \"price_level\": 2,            \"rating\": 3.9,            \"reference\": \"ChIJc_h0ZeIadkgRdri2AhGTfRY\",            \"scope\": \"GOOGLE\",            \"types\": [                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"93 Kentish Town Rd, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.49345100000001,                    \"lng\": -0.141186                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.49477002989271,                        \"lng\": -0.1399014201072778                    },                    \"southwest\": {                        \"lat\": 51.49207037010727,                        \"lng\": -0.1426010798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"a53161332a7f317b35c594ffa5f87601ecaecf12\",            \"name\": \"dim t\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 2432,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/115776118188701245903/photos\\\">Simon Edwardsson</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAXYkhqmsEn1iu7ThTkVRIvlQcCs8AUrSxKL53DGRjdD9WMhuBAzh-PxehIz21PqgrOgEAjUKPrYHc6oQKIC4FpPq3siCtukO_JiYLQq6cgbkJr5coVYwhSU3GI8k8_ZsuEhD72rHbcuTKFNXhsIz8xAsXGhSD-Z2S3QkWkxLnOy1SgY-taWEGjw\",                    \"width\": 3286                }            ],            \"place_id\": \"ChIJjZyz_B8FdkgRCxl46YcOCVE\",            \"plus_code\": {                \"compound_code\": \"FVV5+9G Pimlico, London\",                \"global_code\": \"9C3XFVV5+9G\"            },            \"price_level\": 2,            \"rating\": 3.8,            \"reference\": \"ChIJjZyz_B8FdkgRCxl46YcOCVE\",            \"scope\": \"GOOGLE\",            \"types\": [                \"bar\",                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"56-62 Wilton Rd, London\"        },        {            \"geometry\": {                \"location\": {                    \"lat\": 51.507381,                    \"lng\": -0.1300773                },                \"viewport\": {                    \"northeast\": {                        \"lat\": 51.50882047989271,                        \"lng\": -0.1286767201072778                    },                    \"southwest\": {                        \"lat\": 51.50612082010727,                        \"lng\": -0.1313763798927222                    }                }            },            \"icon\": \"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png\",            \"id\": \"72d7adc7fccdc038d4644b73d35045257732d44a\",            \"name\": \"Thai Square Trafalgar Square\",            \"opening_hours\": {                \"open_now\": true            },            \"photos\": [                {                    \"height\": 1365,                    \"html_attributions\": [                        \"<a href=\\\"https://maps.google.com/maps/contrib/102793914147321658465/photos\\\">Thai Square Trafalgar Square</a>\"                    ],                    \"photo_reference\": \"CmRaAAAAxFsrj1TdYYpqtQEolaluUmYaP1GMAZkg0UeheiPhNIK-OI7uVHIuQnr58R4x-Fp1pw0F-ON621XRgHDlhugc82YD_VdC0rp8TtgvYebY8aDZXkjILYV6WlXHURdsNKrtEhBLiUk1BNoq5T34OyMqEKdWGhSEKVTgo4vIYXkWyHrYblpFVKoOzQ\",                    \"width\": 2048                }            ],            \"place_id\": \"ChIJ7TpKztEEdkgRkuPDNp_g11g\",            \"plus_code\": {                \"compound_code\": \"GV49+XX St. James's, London\",                \"global_code\": \"9C3XGV49+XX\"            },            \"price_level\": 2,            \"rating\": 4,            \"reference\": \"ChIJ7TpKztEEdkgRkuPDNp_g11g\",            \"scope\": \"GOOGLE\",            \"types\": [                \"bar\",                \"restaurant\",                \"food\",                \"point_of_interest\",                \"establishment\"            ],            \"vicinity\": \"21-24 Cockspur St, London\"        }    ],    \"status\": \"OK\"}";
        private static readonly HttpClient client = new HttpClient();

        const string baseString = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=51.509985,-0.117709&radius=40000&type=restaurant&keyword=asian&key=AIzaSyC11-5ed5YzTPxB1tkKVsa1LE-kUmf8Lgw";


        static string ReadAllRestaurants()
        {
            return null;
        }

        public static IEnumerable<string> ToCsv<T>(IEnumerable<T> objectlist, string separator = ",", bool header = true)
        {
            FieldInfo[] fields = typeof(T).GetFields();
            PropertyInfo[] properties = typeof(T).GetProperties();
            if (header)
            {
                yield return String.Join(separator, fields.Select(f => f.Name).Concat(properties.Select(p => p.Name)).ToArray());
            }
            foreach (var o in objectlist)
            {
                yield return string.Join(separator, fields.Select(f => (f.GetValue(o) ?? "").ToString())
                    .Concat(properties.Select(p => (p.GetValue(o, null) ?? "").ToString())).ToArray());
            }
        }

        static Restaurant ParseObject(JToken token, int index)
        {
            return new Restaurant
            {
                Id = index,
                Cousines = cousine,
                PlaceId = token.Value<string>("id"),
                Latitude = token.SelectToken("geometry").SelectToken("location").Value<double>("lat"),
                Longitude = token.SelectToken("geometry").SelectToken("location").Value<double>("lng"),
                Name = token.Value<string>("name"),
                PriceLevel = token.Value<int>("price_level"),
                Rating = token.Value<double>("rating"),
                Ref = token.Value<string>("reference"),
                CloseTo = token.Value<string>("vicinity")
            };
        }

        static async Task<JObject> SendRequest(string nextToken = "")
        {
            string result = string.Empty;
            var requestUri = new Uri(string.IsNullOrEmpty(nextToken) ? string.Format(baseString + "&pagetoken={0}", nextToken) : baseString);
            var httpClient = new HttpClient();
            var content = await httpClient.GetStringAsync(requestUri);
            return await Task.Run(() => JObject.Parse(content));  
        }

        static void Main(string[] args)
        {
            var res = SendRequest();
            dynamic json = JObject.Parse(currentObject); /* JsonConvert.DeserializeObject(currentObject);*/
            int index = 0;
            var restaurants = new List<Restaurant>();
            foreach (var result in (IEnumerable<dynamic>)json.results)
            {
                restaurants.Add(ParseObject(result, index));
                index++;
            }
            using (TextWriter tw = File.CreateText($"{cousine}.csv"))
            {
                foreach (var line in ToCsv<Restaurant>(restaurants))
                {
                    tw.WriteLine(line);
                }
            }
        }
    }
}
